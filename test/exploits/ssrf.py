import requests
from .common import *

def internal_system_access(target):
    # headers = {
    #     "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0"
    # }
    # # Set up target user
    # user_data = {
    #     "username": "target",
    #     "password": "password",
    # }
    # registration_response = requests.post(f"{target}/register.php", data=user_data, headers=headers)
    # # sign in
    # session = requests.session()
    # signin_response = session.post(f"{target}/signin.php", data=user_data, headers=headers)

    create_user(target, "target2", "password")
    r = sign_in(target, "target2", "password")
    n = create_product(target, r["token"], "test", "test", "30")
    add_image_from_url(target, r["token"], n, "https://visualstudiomagazine.com/-/media/ECG/visualstudiomagazine/Images/introimages/ComputerBug.jpg")

    # return "TOKEN" in session.cookies and bytes(f"Witaj {user_data['username']}", encoding="utf-8") in attack_response.content